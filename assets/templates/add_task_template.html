<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add Task</title>
  <script src="/js/add_task.js"></script>
  <link rel="stylesheet" href="../../styles/add_task_template.css">
  <link rel="stylesheet" href="/styles/style.css">
</head>

<body>

  <div class="task-template">
    <form onsubmit="addTask(); return false">
      <h2 class="add-task-header">Add Task</h2>
      <div class="seperate-description-deadline">
        <div class="task-description">
          <div class="flex">
            <span>Title</span>
            <p class="important">*</p>
          </div>

          <div class="add-task-input-container mb" id="title-container">
            <input id="input-title" required type="text" placeholder="Enter a title" />
          </div>
          <div class="error-text-container"><span class="error-text">This field is required</span></div>
          <span>Description</span>
          <div class="add-task-input-container">
            <textarea id="input-description" placeholder="Enter a Description"></textarea>
          </div>
          <span>Assigned to</span>
          <div class="add-task-input-container">
            <select id="input-assignTo">
              <option value="" disabled selected hidden>Select contacts to assign</option>
              <option>Marketing</option>
              <option>Development</option>
              <option>Design</option>
            </select>
          </div>
        </div>
        <div class="alert">
          <div class="flex">
            <p class="important">*</p><span>This field is required</span>
          </div>
        </div>
        <div class="seperator"></div>
        <div class="task-deadline">
          <div class="flex">
            <span>Due date</span>
            <p class="important">*</p>
          </div>
          <div class="add-task-input-container mb" id="date-container">
            <input id="input-date" class="date-input" type="date" />
          </div>
          <div class="error-text-container"><span class="error-text">This field is required</span></div>
          <span>Prio</span>
          <div class="prio-container">
            <button type="button" onclick="getPrio('Urgent')">Urgent<img src="/assets/img/urgent.svg"></button>
            <button type="button" onclick="getPrio('Medium')">Medium<img src="/assets/img/medium.svg"></button>
            <button type="button" onclick="getPrio('Low')">Low<img src="/assets/img/low.svg"></button>
          </div>
          <div class="flex">
            <span>Category</span>
            <p class="important">*</p>
          </div>
          <div class="add-task-input-container">
            <select id="input-category">
              <option value="" disabled selected hidden>Select task category</option>
              <option>User Story</option>
              <option>Technical Task</option>
            </select>
          </div>
          <span>Subtasks</span>
          <div class="add-task-input-container">
            <input class="subtask-input" type="text" placeholder="Add new subtask" />
            <img src="/assets/img/add.svg">
          </div>
        </div>
      </div>
      <button onclick="showMovableContainer('remove', 'addTask')" class="close-task"><img
          src="/assets/img/close.svg"></button>
      <div class="task-buttons">
        <button onclick="showMovableContainer('remove', 'addTask')" class="cancel-button">Clear
          <div class="cancel-svg-container">
            <svg width="13" height="14" viewBox="0 0 13 14" xmlns="http://www.w3.org/2000/svg" class="cancel-svg">
              <path
                d="M6.24953 7.00008L11.4925 12.2431M1.00653 12.2431L6.24953 7.00008L1.00653 12.2431ZM11.4925 1.75708L6.24853 7.00008L11.4925 1.75708ZM6.24853 7.00008L1.00653 1.75708L6.24853 7.00008Z"
                stroke="#2A3647" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" strocke="" />
            </svg>
          </div>
        </button>
        <button class="create-button">Create Task<img src="/assets/img/check.svg"></button>
      </div>
    </form>
  </div>

  <script>
    function setBorder() {
      const inputElements = document.querySelectorAll('input, textarea, select');
      inputElements.forEach(element => {
        element.addEventListener('focus', () => {
          element.parentElement.classList.add('focused');
        });
        element.addEventListener('blur', () => {
          element.parentElement.classList.remove('focused');
        });
      });
    }

    function testTask(event) {
      event.preventDefault();

      const titleInput = document.getElementById('input-title');
      const dateInput = document.getElementById('input-date');
      const errorTextTitle = document.querySelector('#title-container .error-text');
      const errorTextDate = document.querySelector('#date-container .error-text');

      // Überprüfe beide Eingabefelder und zeige Fehlermeldungen an, falls erforderlich
      const inputs = [
        { input: titleInput, errorText: errorTextTitle },
        { input: dateInput, errorText: errorTextDate }
      ];

      inputs.forEach(inputItem => {
        if (inputItem.input.value.trim() === '') {
          inputItem.input.parentElement.classList.add('error');
          inputItem.errorText.style.display = 'block';
        } else {
          inputItem.input.parentElement.classList.remove('error');
          inputItem.errorText.style.display = 'none';
        }

        // Füge Event-Listener hinzu, um die Fehlermeldung auszublenden, wenn Text eingegeben wird
        inputItem.input.addEventListener('input', () => {
          if (inputItem.input.value.trim() !== '') {
            inputItem.input.parentElement.classList.remove('error');
            inputItem.errorText.style.display = 'none';
          }
        });
      });
    }
  </script>
</body>

</html>